<!DOCTYPE html>
<html lang="en">

	<title>eBoy | E-Commerce</title>

		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

	<head>

		<!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css"> -->
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
    <script src="//code.jquery.com/jquery-1.11.1.min.js"></script>

		<!-- <script src="jquery/jquery.min.js"></script>
		<link rel="stylesheet" href="css/bootstrap.min.css">
		<link rel="stylesheet" href="css/style.css">
		<script src="js/bootstrap.min.js"></script>
		<link rel="icon" href="images/icon.png" type="image/x-icon" />
		 -->
	<link href="https://fonts.googleapis.com/css?family=Lobster" rel="stylesheet">
	</head>
	<body>
	<div class="container-fluid">
		<div class="container">
      <h2 class="text-center" id="title">eBoy</h2>
			<h4 class="text-center" id="title">E-Commerce</h4>
 			<hr>
			<div class="row">
				<div class="col-md-5">
          <form id="register_form" role="form" method="post">
						<fieldset>
              <p class="text-uppercase text-center">Register</p>
              <div class="form-group">
                <input type="text" name="register_username" id="register_username" class="form-control input-lg" placeholder="Username">
              </div>

              <div class="form-group">
    						<input type="text" name="register_firstname" id="register_firstname" class="form-control input-lg" placeholder="First name">
    					</div>
              <div class="form-group">
    						<input type="text" name="register_lastname" id="register_lastname" class="form-control input-lg" placeholder="Last name">
    					</div>

    					<div class="form-group">
    						<input type="email" name="register_email" id="register_email" class="form-control input-lg" placeholder="Email Address">
    					</div>

    					<div class="form-group">
    						<input type="password" name="register_password" id="register_password" class="form-control input-lg" placeholder="Password">
    					</div>
    					<div class="form-group">
    						<input type="password" name="password2" id="password2" class="form-control input-lg" placeholder="Repeat Password">
    					</div>
              <div class="text-center">
  						  <button style="text-align:center;" id="register_button" type="button" class="btn btn-lg btn-secondary">
                  Register
                </button>
              </div>
						</fieldset>
					</form>
				</div>

				<div class="col-md-2">
          <!-- NULL -->
				</div>

				<div class="col-md-5">
          <form id="login_form" role="form" method="post">
            <fieldset>
              <p class="text-uppercase text-center">Login</p>
              <div class="form-group">
                <input type="text" name="login_username" id="login_username" class="form-control input-lg" placeholder="Username">
              </div>

              <div class="form-group">
                <input type="password" name="login_password" id="login_password" class="form-control input-lg" placeholder="Password">
              </div>
              <div class="text-center">
  						  <button style="text-align:center;" id="login_button" type="button" class="btn btn-lg btn-secondary">
                  Login
                </button>
              </div>
            </fieldset>
          </form>
        </div>
      </div>
		</div>
	</div>
	</body>

  <script>
  $('#register_button').click(function() {
    var username = $("#register_username").val();
    var firstname = $("#register_firstname").val();
    var lastname = $("#register_lastname").val();
    var email = $("#register_email").val();
    var password = $("#register_password").val();
    var repeated_password = $("#password2").val();

    if(username.trim() === ('')){
      alert("Please enter a valid username!");
      return;
    }
    if(firstname.trim() === ('')){
      alert("Please enter your first name!");
      return;
    }
    if(lastname.trim() === ('')){
      alert("Please enter your last name!");
      return;
    }
    if(email.trim() === ('')){
      alert("Please enter your email address!");
      return;
    }
    if(password.trim() === ('')){
      alert("Please enter a valid password!");
      return;
    }
    if(repeated_password.trim() === ('')){
      alert("Please repeat your password.");
      return;
    }
    if(password != repeated_password){
      alert("The passwords do not match!");
      return;
    }

    $.ajax({
      url: "{{url_for('CSE305_register')}}",
      data: $('#register_form').serialize(),
      type: 'POST',
      success: function(response) {
        if(response == "Success"){
          //Refreshing the webpage!
          document.location.reload();
        }
        else{
          alert("Unable to register! - " + response);
        }
      },
      error: function(error) {
        console.log(error);
      }
    });
  });

  $('#login_button').click(function() {
    var username = $("#login_username").val();
    var password = $("#login_password").val();

    if(username.trim() === ('')){
      alert("Please enter a valid username!");
      return;
    }
    if(password.trim() === ('')){
      alert("Please enter a valid password!");
      return;
    }

    $.ajax({
      url: "{{url_for('CSE305_login')}}",
      data: $('#login_form').serialize(),
      type: 'POST',
      success: function(response) {
        if(response == "Success"){
          //Refreshing the webpage!
          document.location.reload();
        }
        else{
          alert("Unable to login! - " + response);
        }
      },
      error: function(error) {
        console.log(error);
      }
    });
  });


  </script>

</html>
